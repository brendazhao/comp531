{"version":3,"sources":["webpack:///webpack/bootstrap 2dfcbfb07fe69663b124","webpack:///./src/index.js","webpack:///./src/dummy.js"],"names":["window","onload","document","querySelector","onclick","value","url","resource","method","endpoint","payload","options","credentials","headers","body","JSON","stringify","fetch","then","r","status","get","indexOf","json","text","console","error","statusText","Error","login","username","password","box","user","headlines","innerHTML","headline","toggle","catch","message","logout","show","toggleElement","el","id","style","display","_show","forEach","updateHeadline","response","log"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2dfcbfb07fe69663b124","\r\nimport { login, logout, updateHeadline } from './dummy'\r\n\r\nwindow.onload = () => {\r\n    document.querySelector(\"#login\").onclick = login\r\n    document.querySelector(\"#logout\").onclick = logout\r\n    document.querySelector(\"#headline\").onclick = () => {\r\n        updateHeadline(document.querySelector(\"#newHeadline\").value)\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// Inclass Mocking Exercise\r\n// ========================\r\n//\r\n// This is the client code of our web application.\r\n// Most of the implementation has already been completed for you.\r\n//\r\n// To assure that Mocking is occuring correctly, you should try\r\n// changing the server url to something non-sensical.\r\n//\r\n// You are asked to implement the updateHeadline() function below.\r\n//\r\n\r\nconst url = 'https://webdev-dummy.herokuapp.com'\r\n\r\nconst resource = (method, endpoint, payload) => {\r\n    const options = {\r\n        method,\r\n        credentials: 'include',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n    if (payload) options.body = JSON.stringify(payload)\r\n\r\n    return fetch(`${url}/${endpoint}`, options)\r\n        .then(r => {\r\n            if (r.status === 200) {\r\n                if (r.headers.get('Content-Type').indexOf('json') > 0) {\r\n                    return r.json()\r\n                } else {\r\n                    return r.text()\r\n                }\r\n            } else {\r\n                // useful for debugging, but remove in production\r\n                console.error(`${method} ${endpoint} ${r.statusText}`)\r\n                throw new Error(r.statusText)\r\n            }\r\n        })\r\n}\r\n\r\nconst login = () => {\r\n\r\n    const username = document.querySelector(\"#username\")\r\n    const password = document.querySelector(\"#password\")\r\n\r\n    const box = document.querySelector(\"#message\")\r\n    return resource('POST', 'login', {\r\n        username: username.value,\r\n        password: password.value\r\n    })\r\n        .then(r => resource('GET', 'headlines'))\r\n        .then(r => {\r\n            const user = r.headlines[0]\r\n            box.innerHTML = `you are logged in as ${user.username} \"${user.headline}\"`\r\n            toggle(false)\r\n        })\r\n        .catch(r => box.innerHTML = `\"${r.message || 'Error'}\" when logging in`)\r\n}\r\n\r\nconst logout = () => {\r\n    const box = document.querySelector(\"#message\")\r\n    return resource('PUT', 'logout')\r\n        .then(r => box.innerHTML = \"You have logged out\")\r\n        .then(_ => toggle(true))\r\n        .catch(r => box.innerHTML = `\"${r.message}\" when logging out`)\r\n}\r\n\r\nconst toggle = (show) => {\r\n    const toggleElement = _show => id => {\r\n        const el = document.querySelector(id)\r\n        if (el) {\r\n            el.style.display = _show ? 'inline' : 'none'\r\n        }\r\n    }\r\n    ['#username', '#password', '#login'].forEach(toggleElement(show));\r\n    ['#logout', '#headline', '#newHeadline'].forEach(toggleElement(!show));\r\n}\r\n\r\n\r\nconst updateHeadline = (headline) =>{\r\n  resource('PUT', 'headline', { headline }).then((response) => {\r\n    const box = document.querySelector(\"#message\")\r\n    box.innerHTML = `you are logged in as ${response.username} \"${response.headline}\"`\r\n    console.log(`New headline ${response.headline}`)\r\n  })\r\n}\r\nexport { url, login, logout, updateHeadline }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dummy.js"],"sourceRoot":""}